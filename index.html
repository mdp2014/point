<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Scores baby fooooooot !!!</title>
    <style>
        body {
            font-family: 'Segoe UI', Arial, sans-serif;
            background: linear-gradient(120deg, #e0e7ff 0%, #b2f7ef 100%);
            min-height: 100vh;
            margin: 0;
        }
        h1 {
            margin: 40px auto 20px auto;
            text-align: center;
            color: #1e3a8a;
            font-size: 2.5rem;
            letter-spacing: 2px;
        }
        table {
            width: 90%;
            max-width: 900px;
            margin: 30px auto;
            border-collapse: collapse;
            box-shadow: 0px 8px 32px 0px #4f46e540;
            background: rgba(255,255,255,0.95);
            border-radius: 12px;
            overflow: hidden;
        }
        th, td {
            padding: 18px 10px;
            border-bottom: 1px solid #e5e7eb;
            text-align: center;
            font-size: 1.15rem;
        }
        th {
            background: linear-gradient(90deg, #3b82f6 60%, #38bdf8 100%);
            color: #fff;
            border: none;
            font-size: 1.2rem;
            letter-spacing: 1px;
        }
        tr:last-child td {
            border-bottom: none;
        }
        button {
            padding: 10px 18px;
            font-size: 1rem;
            background-color: #3b82f6;
            color: #fff;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            margin: 2px;
            font-weight: 500;
            transition: background 0.15s, transform 0.1s;
            box-shadow: 0 2px 8px #0001;
        }
        button:hover {
            background-color: #2563eb;
            transform: translateY(-2px) scale(1.05);
        }
        .btn-danger {
            background: #ef4444;
        }
        .btn-danger:hover {
            background: #b91c1c;
        }
        .ajoutjoueur {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-top: 30px;
            margin-bottom: 40px;
            gap: 10px;
        }
        #playerName {
            border: 2px solid #60a5fa;
            border-radius: 8px;
            padding: 12px;
            font-size: 1.15rem;
            width: 300px;
            background-color: #f1f5f9;
            color: #111827;
            box-shadow: 1px 2px 8px #4f46e520;
            outline: none;
            transition: border-color 0.2s;
        }
        #playerName:focus {
            border-color: #2563eb;
            background: #fff;
        }
        @media (max-width: 600px) {
            table, .ajoutjoueur {
                width: 99%;
                flex-direction: column;
            }
            #playerName {
                width: 100%;
                font-size: 1rem;
            }
        }
        .score-negative {
            color: #ef4444;
            font-weight: bold;
        }
        .score-positive {
            color: #059669;
            font-weight: bold;
        }
        .score-zero {
            color: #64748b;
        }
        /* Popup styles */
        .overlay-popup {
            position: fixed;
            top: 0; left: 0; width: 100vw; height: 100vh;
            background: rgba(0,0,0,0.35);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999;
        }
        .popup-select-player {
            background: #fff;
            padding: 28px 20px 18px 20px;
            border-radius: 12px;
            box-shadow: 0 4px 24px #0002;
            text-align: center;
            min-width: 240px;
        }
        .popup-select-player button {
            margin: 6px 4px;
        }
        .popup-select-player .cancel-btn {
            background: #ddd;
            color: #222;
            margin-top: 20px;
        }
        .popup-select-player .cancel-btn:hover {
            background: #bbb;
        }
        .popup-title {
            font-weight: bold;
            margin-bottom: 15px;
            font-size: 1.1rem;
        }
        /* TIMER */
        .timer-container {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-top: 20px;
            gap: 12px;
            flex-wrap: wrap;
        }
        #timerDisplay {
            font-size: 2rem;
            margin-left: 18px;
            color: #1e3a8a;
            font-weight: bold;
            letter-spacing: 2px;
            min-width: 85px;
            text-align: center;
            background: #dbeafe;
            border-radius: 6px;
            padding: 2px 16px;
            box-shadow: 0 2px 8px #60a5fa30;
            border: 2px solid #3b82f6;
            margin-bottom: 6px;
        }
        #timerEndMsg {
            width: 100%;
            text-align: center;
            font-size: 1.3rem;
            text-shadow: 0 2px 8px #f87171bb;
            animation: timerPulse 1.2s infinite alternate;
        }
        @keyframes timerPulse {
            0% { color: #f87171; transform: scale(1);}
            100% { color: #b91c1c; transform: scale(1.09);}
        }
    </style>
</head>
<body>
    <!-- TIMER -->
    <div class="timer-container">
        <label for="timerDuration">Durée du match : </label>
        <input type="number" id="timerDuration" value="10" min="1" max="99" style="width:50px;">
        <span>min</span>
        <button id="startTimer">Démarrer</button>
        <button id="pauseTimer" disabled>Pause</button>
        <button id="resetTimer" disabled>Réinitialiser</button>
        <div id="timerDisplay">10:00</div>
        <div id="timerEndMsg" style="color:red; font-weight:bold; margin-top:8px;"></div>
        <!-- Bruit pour la fin du match -->
        <audio id="timerSound">
            <source src="https://cdn.pixabay.com/audio/2022/10/16/audio_12b5b3b2e9.mp3" type="audio/mp3">
            <!-- Tu peux changer ce son par un autre si tu veux ! -->
        </audio>
    </div>
    <h1>Tableau des scores</h1>
    <table>
        <thead>
            <tr>
                <th>Joueur</th>
                <th>Points</th>
                <th>Paniers / Actions</th>
            </tr>
        </thead>
        <tbody id="players"></tbody>
    </table>
    <div class="ajoutjoueur">
        <input type="text" id="playerName" placeholder="Ajouter un joueur">
        <button id="addButton">Ajouter</button>
    </div>
    <script>
        // --- TIMER MATCH ---
        let timerInterval = null;
        let timerTimeLeft = 0; // en secondes
        let timerRunning = false;

        const timerDurationInput = document.getElementById("timerDuration");
        const timerDisplay = document.getElementById("timerDisplay");
        const timerEndMsg = document.getElementById("timerEndMsg");
        const startBtn = document.getElementById("startTimer");
        const pauseBtn = document.getElementById("pauseTimer");
        const resetBtn = document.getElementById("resetTimer");
        const timerSound = document.getElementById("timerSound");

        function updateTimerDisplay() {
            const min = Math.floor(timerTimeLeft / 60);
            const sec = timerTimeLeft % 60;
            timerDisplay.textContent = `${min.toString().padStart(2, '0')}:${sec.toString().padStart(2, '0')}`;
        }

        function startTimer() {
            if (timerRunning) return;
            timerRunning = true;
            startBtn.disabled = true;
            pauseBtn.disabled = false;
            resetBtn.disabled = false;
            timerEndMsg.textContent = "";
            timerEndMsg.style.display = "none";
            timerInterval = setInterval(() => {
                if (timerTimeLeft > 0) {
                    timerTimeLeft--;
                    updateTimerDisplay();
                    if (timerTimeLeft === 0) {
                        clearInterval(timerInterval);
                        timerRunning = false;
                        startBtn.disabled = true;
                        pauseBtn.disabled = true;
                        timerEndMsg.textContent = "⏰ Temps écoulé !";
                        timerEndMsg.style.display = "block";
                        timerSound.currentTime = 0;
                        timerSound.play();
                    }
                }
            }, 1000);
        }

        function pauseTimer() {
            if (!timerRunning) return;
            clearInterval(timerInterval);
            timerRunning = false;
            startBtn.disabled = false;
            pauseBtn.disabled = true;
        }

        function resetTimer() {
            clearInterval(timerInterval);
            timerRunning = false;
            timerTimeLeft = parseInt(timerDurationInput.value, 10) * 60;
            updateTimerDisplay();
            startBtn.disabled = false;
            pauseBtn.disabled = true;
            resetBtn.disabled = true;
            timerEndMsg.textContent = "";
            timerEndMsg.style.display = "none";
        }

        function initTimer() {
            timerDurationInput.addEventListener("input", function () {
                if (!timerRunning) {
                    timerTimeLeft = parseInt(timerDurationInput.value, 10) * 60;
                    updateTimerDisplay();
                }
            });
            startBtn.addEventListener("click", startTimer);
            pauseBtn.addEventListener("click", pauseTimer);
            resetBtn.addEventListener("click", resetTimer);

            // Initial display
            timerTimeLeft = parseInt(timerDurationInput.value, 10) * 60;
            updateTimerDisplay();
            timerEndMsg.style.display = "none";
        }
        initTimer();

        // --- SCORE TABLE ---
        let players = [];
        const playerNameInput = document.getElementById("playerName");
        const addButton = document.getElementById("addButton");

        playerNameInput.addEventListener("keydown", function(event) {
            if (event.key === 'Enter') {
                addPlayer();
            }
        });
        addButton.addEventListener("click", addPlayer);

        function addPlayer() {
            const playerName = playerNameInput.value.trim();
            if (playerName === "") return;
            players.push({ name: playerName, score: 0 });
            playerNameInput.value = "";
            updateTable();
        }

        function deletePlayer(index) {
            players.splice(index, 1);
            updateTable();
        }

        function getScoreClass(score) {
            if (score < 0) return 'score-negative';
            if (score > 0) return 'score-positive';
            return 'score-zero';
        }

        function updateTable() {
            const tableBody = document.getElementById("players");
            tableBody.innerHTML = "";

            players.forEach((player, index) => {
                const row = document.createElement("tr");

                const nameCell = document.createElement("td");
                nameCell.textContent = player.name;

                const scoreCell = document.createElement("td");
                scoreCell.textContent = player.score;
                scoreCell.className = getScoreClass(player.score);

                const actionsCell = document.createElement("td");

                const plus1Button = document.createElement("button");
                plus1Button.textContent = "+1";
                plus1Button.title = "Ajouter 1 point";
                plus1Button.addEventListener("click", () => {
                    player.score += 1;
                    updateTable();
                });

                const plus2Button = document.createElement("button");
                plus2Button.textContent = "+2";
                plus2Button.title = "Ajouter 2 points";
                plus2Button.addEventListener("click", () => {
                    player.score += 2;
                    updateTable();
                });

                const plus3Button = document.createElement("button");
                plus3Button.textContent = "+3";
                plus3Button.title = "Ajouter 3 points";
                plus3Button.addEventListener("click", () => {
                    player.score += 3;
                    updateTable();
                });

                const minus1Button = document.createElement("button");
                minus1Button.textContent = "-1";
                minus1Button.title = "Retirer 1 point";
                minus1Button.addEventListener("click", () => {
                    player.score -= 1;
                    updateTable();
                });

                actionsCell.appendChild(plus1Button);
                actionsCell.appendChild(plus2Button);
                actionsCell.appendChild(plus3Button);
                actionsCell.appendChild(minus1Button);

                // Nouveau bouton : ajouter les points d’un autre joueur
                const addFromOtherButton = document.createElement("button");
                addFromOtherButton.textContent = "+ d'un autre joueur";
                addFromOtherButton.title = "Ajouter les points d'un autre joueur à ce joueur";
                addFromOtherButton.addEventListener("click", () => {
                    showPlayerSelect(index);
                });
                actionsCell.appendChild(addFromOtherButton);

                const deleteButton = document.createElement("button");
                deleteButton.textContent = "Supprimer";
                deleteButton.className = "btn-danger";
                deleteButton.title = "Supprimer ce joueur";
                deleteButton.addEventListener("click", () => {
                    deletePlayer(index);
                });

                actionsCell.appendChild(deleteButton);

                row.appendChild(nameCell);
                row.appendChild(scoreCell);
                row.appendChild(actionsCell);

                tableBody.appendChild(row);
            });
        }

        // Fonction pour afficher la popup de choix du joueur
        function showPlayerSelect(targetIndex) {
            // Créer le fond sombre
            let overlay = document.createElement("div");
            overlay.className = "overlay-popup";

            // Créer la popup
            let popup = document.createElement("div");
            popup.className = "popup-select-player";

            let title = document.createElement("div");
            title.textContent = "Choisir un joueur pour ajouter ses points";
            title.className = "popup-title";
            popup.appendChild(title);

            players.forEach((otherPlayer, idx) => {
                if (idx !== targetIndex) {
                    let btn = document.createElement("button");
                    btn.textContent = `${otherPlayer.name} (${otherPlayer.score})`;
                    btn.addEventListener("click", () => {
                        players[targetIndex].score += otherPlayer.score;
                        document.body.removeChild(overlay);
                        updateTable();
                    });
                    popup.appendChild(btn);
                }
            });

            // Si il n'y a pas d'autres joueurs
            if (players.length <= 1) {
                let info = document.createElement("div");
                info.textContent = "Aucun autre joueur disponible";
                info.style.margin = "10px 0 10px 0";
                popup.appendChild(info);
            }

            // Bouton Annuler
            let cancelBtn = document.createElement("button");
            cancelBtn.textContent = "Annuler";
            cancelBtn.className = "cancel-btn";
            cancelBtn.addEventListener("click", () => {
                document.body.removeChild(overlay);
            });
            popup.appendChild(document.createElement("br"));
            popup.appendChild(cancelBtn);

            overlay.appendChild(popup);
            document.body.appendChild(overlay);
        }

        // Initial rendering
        updateTable();
    </script>
</body>
</html>
